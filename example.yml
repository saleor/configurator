# ============================================================================
# COMPLETE SALEOR CONFIGURATOR EXAMPLE
# ============================================================================
# This example demonstrates all major features of Saleor Configurator.
# Start with introspection, then customize based on your needs.
#
# Quick Start:
#   1. pnpm dlx @saleor/configurator introspect --url <your-url> --token <your-token>
#   2. Modify this configuration based on your requirements
#   3. pnpm dlx @saleor/configurator deploy --url <your-url> --token <your-token>
#
# Documentation: See SCHEMA.md for complete field reference
# ============================================================================

# Global store settings - applies across all channels
shop:
  defaultMailSenderName: "Saleor Store"
  defaultMailSenderAddress: "store@example.com"
  displayGrossPrices: true              # Show prices with tax included
  enableAccountConfirmationByEmail: true
  trackInventoryByDefault: true         # New products track inventory by default
  limitQuantityPerCheckout: 50          # Maximum items per checkout session
  reserveStockDurationAnonymousUser: 60     # Minutes to hold stock for anonymous users
  reserveStockDurationAuthenticatedUser: 120  # Minutes to hold stock for logged-in users
  defaultDigitalMaxDownloads: 5         # Download limit for digital products
  defaultDigitalUrlValidDays: 30        # Days download links remain valid
  defaultWeightUnit: KG                 # Default unit for product weights

# Sales channels - different storefronts or markets
channels:
  - name: Poland
    currencyCode: PLN                   # Currency for this channel
    defaultCountry: PL                  # Default country for shipping/tax
    slug: poland                        # URL identifier
    settings:
      # Order processing automation
      allocationStrategy: PRIORITIZE_SORTING_ORDER
      automaticallyConfirmAllNewOrders: true
      automaticallyFulfillNonShippableGiftCard: true
      
      # Order lifecycle management
      expireOrdersAfter: 30             # Days before orders expire
      deleteExpiredOrdersAfter: 60      # Days before expired orders are deleted
      
      # Payment processing
      markAsPaidStrategy: TRANSACTION_FLOW
      allowUnpaidOrders: false          # Require payment before fulfillment
      automaticallyCompleteFullyPaidCheckouts: true
      defaultTransactionFlowStrategy: AUTHORIZATION
      
      # Business rules  
      includeDraftOrderInVoucherUsage: true
      useLegacyErrorFlow: false

# ============================================================================
# PRODUCT CATALOG STRUCTURE
# ============================================================================

# Product type templates - define structure and attributes for similar products
productTypes:
  - name: Book
    isShippingRequired: true
    productAttributes:
      - name: Author
        inputType: PLAIN_TEXT
      - name: Genre
        inputType: DROPDOWN
        values:
          - name: Fiction
          - name: Non-Fiction
          - name: Fantasy
      - name: Related Books
        inputType: REFERENCE
        entityType: PRODUCT
    variantAttributes:
      - name: Size
        inputType: DROPDOWN
        values:
          - name: Small
          - name: Medium
          - name: Large
  - name: E-Book
    isShippingRequired: false           # Digital products don't need shipping
    productAttributes:
      # Attribute reuse pattern - reference existing attributes by name
      - attribute: Author               # Reuses the "Author" attribute from Book type
      - attribute: Genre                # Reuses the "Genre" attribute from Book type
      - name: File Format               # Define new attribute specific to E-Books
        inputType: DROPDOWN
        values:
          - name: PDF
          - name: EPUB
          - name: MOBI

# Content management - structured pages and content
pageTypes:
  - name: Blog Post
    attributes:
      - name: Published Date # Define a new attribute
        inputType: DATE
      - name: Related Posts
        inputType: REFERENCE
        entityType: PAGE
  - name: Article
    attributes:
      - attribute: Published Date # Reference the existing attribute
      - name: Tags
        inputType: DROPDOWN
        values:
          - name: Technology
          - name: Business
          - name: Lifestyle

categories:
  - name: "Fiction"
    slug: "fiction"
    subcategories:
      - name: "Fantasy"
        slug: "fantasy"
  - name: "Non-Fiction"
    slug: "non-fiction"
    subcategories:
      - name: "Science"
        slug: "science"
      - name: "History"
        slug: "history"

products:
  - name: "Sample Fiction Book"
    slug: "sample-fiction-book"
    productType: "Book"
    category: "Fiction"
    attributes:
      Author: "Jane Doe"
      Genre: "Fiction"
    media:
      - externalUrl: "https://cdn.example.com/products/sample-fiction-book.jpg"
        alt: "Cover of Sample Fiction Book"
    variants:
      - name: "Hardcover"
        sku: "BOOK-001-HC"
        weight: 1.2
        attributes:
          Size: "Large"
          Cover: "Hardcover"
        channelListings: []
      - name: "Paperback"
        sku: "BOOK-001-PB"
        weight: 0.8
        attributes:
          Size: "Standard"
          Cover: "Paperback"
        channelListings: []

# ============================================================================
# LOGISTICS & FULFILLMENT
# ============================================================================

# Physical storage locations for inventory management
warehouses:
  - name: "Main Warehouse"
    slug: "main-warehouse"
    email: "warehouse@example.com"
    isPrivate: false
    clickAndCollectOption: "LOCAL"
    address:
      streetAddress1: "123 Commerce Street"
      streetAddress2: "Building A"
      city: "Warsaw"
      cityArea: "Downtown"
      postalCode: "00-001"
      country: "PL"
      countryArea: "Mazowieckie"
      companyName: "Example Store Ltd."
      phone: "+48123456789"
    shippingZones: ["poland-zone"]

  - name: "Secondary Distribution Center"
    slug: "secondary-dc"
    email: "dc2@example.com"
    isPrivate: true
    clickAndCollectOption: "DISABLED"
    address:
      streetAddress1: "456 Storage Avenue"
      city: "Krakow"
      postalCode: "30-001"
      country: "PL"
      companyName: "Example Store Ltd."
    shippingZones: ["poland-zone", "europe-zone"]

# Geographic shipping regions with methods and pricing
shippingZones:
  - name: "Poland Zone"
    slug: "poland-zone"
    description: "Shipping zone for Poland"
    countries: ["PL"]                   # Countries served by this zone
    warehouses: ["main-warehouse", "secondary-dc"]  # Warehouses that can fulfill orders
    channels: ["poland"]                # Channels this zone serves
    shippingMethods:
      - name: "Standard Shipping"
        type: "PRICE"
        maximumDeliveryDays: 5
        minimumDeliveryDays: 3
        channelListings:
          - channel: "poland"
            maximumOrderPrice: 1000.00
            minimumOrderPrice: 0.00
            price: 19.99
      
      - name: "Express Shipping"
        type: "PRICE"
        maximumDeliveryDays: 2
        minimumDeliveryDays: 1
        channelListings:
          - channel: "poland"
            minimumOrderPrice: 0.00
            price: 39.99

      - name: "Weight-based Shipping"
        type: "WEIGHT"
        maximumDeliveryDays: 7
        minimumDeliveryDays: 5
        channelListings:
          - channel: "poland"
            maximumOrderWeight:
              unit: "KG"
              value: 30
            minimumOrderWeight:
              unit: "KG"
              value: 0
            price: 15.00

  - name: "Europe Zone"
    slug: "europe-zone"
    description: "Shipping zone for European Union countries"
    countries: ["DE", "FR", "IT", "ES", "CZ", "SK"]
    warehouses: ["secondary-dc"]
    channels: []
    shippingMethods:
      - name: "EU Standard Delivery"
        type: "PRICE"
        maximumDeliveryDays: 10
        minimumDeliveryDays: 7
        channelListings: []

# ============================================================================
# TAX CONFIGURATION
# ============================================================================

# Tax classes define tax rates per country
taxClasses:
  - name: "Standard Rate"
    countryRates:
      - countryCode: PL
        rate: 23                    # 23% VAT in Poland
      - countryCode: DE
        rate: 19                    # 19% VAT in Germany
      - countryCode: FR
        rate: 20                    # 20% VAT in France

  - name: "Reduced Rate"
    countryRates:
      - countryCode: PL
        rate: 8                     # Reduced rate for books in Poland
      - countryCode: DE
        rate: 7                     # Reduced rate in Germany
      - countryCode: FR
        rate: 5.5                   # Reduced rate in France

  - name: "Zero Rate"
    countryRates:
      - countryCode: PL
        rate: 0
      - countryCode: DE
        rate: 0
      - countryCode: FR
        rate: 0

# ============================================================================
# COLLECTIONS & MERCHANDISING
# ============================================================================

# Curated product groupings for promotions and merchandising
collections:
  - name: "Summer Sale"
    slug: "summer-sale"
    description: "Hot deals for the summer season"
    products:
      - "sample-fiction-book"       # Reference products by slug
    channelListings:
      - channelSlug: "poland"
        isPublished: true

  - name: "New Arrivals"
    slug: "new-arrivals"
    description: "Latest additions to our catalog"
    products: []
    channelListings:
      - channelSlug: "poland"
        isPublished: true

  - name: "Best Sellers"
    slug: "best-sellers"
    description: "Our most popular items"
    products:
      - "sample-fiction-book"
    channelListings:
      - channelSlug: "poland"
        isPublished: true

# ============================================================================
# DOMAIN MODELING - Custom Entities
# ============================================================================

# Model Types define structure for custom entities (API uses pageTypes)
# Use these to extend beyond Products/Categories/Collections
pageTypes:
  - name: "Brand"
    attributes:
      - name: "Country of Origin"
        inputType: DROPDOWN
        values:
          - name: "USA"
          - name: "UK"
          - name: "France"
          - name: "Italy"
          - name: "Germany"
      - name: "Founded Year"
        inputType: NUMERIC
      - name: "Website"
        inputType: PLAIN_TEXT
      - name: "Logo"
        inputType: FILE

  - name: "Author Profile"
    attributes:
      - name: "Biography"
        inputType: RICH_TEXT
      - name: "Photo"
        inputType: FILE
      - name: "Books Written"
        inputType: REFERENCE
        entityType: PRODUCT          # Links to products

  - name: "Blog Post"
    attributes:
      - name: "Published Date"
        inputType: DATE
      - name: "Author"
        inputType: PLAIN_TEXT
      - name: "Featured Image"
        inputType: FILE
      - name: "Tags"
        inputType: MULTISELECT
        values:
          - name: "News"
          - name: "Tutorial"
          - name: "Review"
          - name: "Interview"
      - name: "Related Posts"
        inputType: REFERENCE
        entityType: PAGE             # Links to other models/pages

# Models are instances of Model Types (API uses pages)
models:
  - title: "Penguin Books"
    slug: "penguin-books"
    modelType: "Brand"
    isPublished: true
    content: "Penguin Books is a British publishing house founded in 1935."
    attributes:
      country-of-origin: "UK"
      founded-year: 1935
      website: "https://www.penguin.co.uk"

  - title: "HarperCollins"
    slug: "harpercollins"
    modelType: "Brand"
    isPublished: true
    content: "HarperCollins Publishers is one of the world's largest publishing companies."
    attributes:
      country-of-origin: "USA"
      founded-year: 1989
      website: "https://www.harpercollins.com"

  - title: "Jane Doe"
    slug: "jane-doe"
    modelType: "Author Profile"
    isPublished: true
    content: "Jane Doe is an award-winning fiction author known for her captivating storytelling."
    attributes:
      biography: "<p>Jane Doe has written over 20 bestselling novels...</p>"

  - title: "Welcome to Our Store"
    slug: "welcome-post"
    modelType: "Blog Post"
    isPublished: true
    content: "<h2>Welcome!</h2><p>We're excited to launch our new online bookstore...</p>"
    attributes:
      published-date: "2024-01-15"
      author: "Store Team"
      tags:
        - "News"

# ============================================================================
# NAVIGATION STRUCTURES
# ============================================================================

# Menus organize entities hierarchically for navigation
menus:
  - name: "Main Navigation"
    slug: "main-nav"
    items:
      - name: "Shop by Category"
        children:
          - name: "Fiction"
            category: "fiction"        # Link to category by slug
          - name: "Non-Fiction"
            category: "non-fiction"
      - name: "Collections"
        children:
          - name: "New Arrivals"
            collection: "new-arrivals"  # Link to collection by slug
          - name: "Best Sellers"
            collection: "best-sellers"
          - name: "Summer Sale"
            collection: "summer-sale"
      - name: "Our Brands"
        children:
          - name: "Penguin Books"
            page: "penguin-books"       # Link to model/page by slug
          - name: "HarperCollins"
            page: "harpercollins"

  - name: "Footer Navigation"
    slug: "footer-nav"
    items:
      - name: "About Us"
        url: "/about"                   # External/internal URL
      - name: "Contact"
        url: "/contact"
      - name: "Blog"
        page: "welcome-post"
      - name: "Privacy Policy"
        url: "/privacy"
      - name: "Terms of Service"
        url: "/terms"

  - name: "Help Center"
    slug: "help-center"
    items:
      - name: "Shipping Information"
        url: "/help/shipping"
      - name: "Returns & Refunds"
        url: "/help/returns"
      - name: "FAQs"
        url: "/help/faq"
