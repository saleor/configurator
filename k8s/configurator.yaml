apiVersion: apps/v1
kind: Deployment
metadata:
  name: saleor-configurator
  namespace: saleor
spec:
  replicas: 1
  selector:
    matchLabels:
      app: saleor-configurator
  template:
    metadata:
      labels:
        app: saleor-configurator
    spec:
      containers:
      - name: saleor-configurator
        image: saleor-configurator
        imagePullPolicy: IfNotPresent
        env:
        - name: SALEOR_API_URL
          value: "http://api:8000/graphql/"
        - name: APP_TOKEN
          valueFrom:
            secretKeyRef:
              name: saleor-secrets
              key: configurator-app-token
              optional: true
---
apiVersion: v1
kind: Secret
metadata:
  name: saleor-secrets
  namespace: saleor
type: Opaque
stringData:
  configurator-app-token: "changeme" # This should be changed to a real token in production 